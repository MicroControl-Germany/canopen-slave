<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CANopen FD Slave Stack: cos_sdo.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mc_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="mc_logo_png.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CANopen FD Slave Stack
   </div>
   <div id="projectbrief">Making your systems precise, reliable and high-quality - Version 6.10</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_ab9ddd2c2615ef270f1f12625803a92d.html">stack-cos</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">cos_sdo.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>With Service Data Objects (SDOs) the access to entries of a device Object Dictionary is provided. As these entries may contain data of arbitrary size and data type SDOs can be used to transfer multiple data sets (each containing an arbitrary large block of data) from a client to a server and vice versa. The client can control via a multiplexor (index and sub-index of the Object Dictionary) which data set is to be transferred. The contents of the data set are defined within the Object Dictionary (see <a class="el" href="cos__dict_8h.html" title="CANopen Slave Stack - Dictionary.">cos_dict.h</a>). </p>
<p>The functions in this module are called by the CANopen slave manager on reception of a SDO request.</p>
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for cos_sdo.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="cos__sdo_8h__incl.png" border="0" usemap="#acos__sdo_8h" alt=""/></div>
<map name="acos__sdo_8h" id="acos__sdo_8h">
<area shape="rect" title="CANopen Slave Stack &#45; Service Data Objects (SDO) ." alt="" coords="125,5,208,32"/>
<area shape="rect" href="cos__defs_8h.html" title="CANopen Slave Stack &#45; General definitions." alt="" coords="123,80,210,107"/>
<area shape="rect" href="cp__core_8h.html" title="CANpie core functions." alt="" coords="13,155,93,181"/>
<area shape="rect" href="cp__msg_8h.html" title="CANpie message access" alt="" coords="101,229,181,256"/>
<area shape="rect" href="canopen_8h.html" title="General CANopen definitions." alt="" coords="206,229,290,256"/>
<area shape="rect" href="cos__conf_8h.html" title="CANopen Slave Stack &#45; General configuration." alt="" coords="230,155,317,181"/>
<area shape="rect" href="cp__fifo_8h.html" title="CANpie FIFO functions." alt="" coords="5,229,77,256"/>
<area shape="rect" href="canpie_8h.html" title="CANpie constants, structures and enumerations" alt="" coords="93,304,165,331"/>
<area shape="rect" href="mc__compiler_8h.html" title="Definition of compiler independent data types." alt="" coords="193,379,303,405"/>
<area shape="rect" title=" " alt="" coords="66,379,169,405"/>
<area shape="rect" title=" " alt="" coords="52,453,185,480"/>
<area shape="rect" title=" " alt="" coords="210,453,286,480"/>
<area shape="rect" title=" " alt="" coords="310,453,375,480"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7721c3e6256b2bd919505d80a21c2849"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cos__sdo_8h.html#a7721c3e6256b2bd919505d80a21c2849">CosSdoBlkFinal</a> (uint16_t uwIndexV, uint8_t ubSubIndexV)</td></tr>
<tr class="separator:a7721c3e6256b2bd919505d80a21c2849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50611dff589c7f45be050e3917f3fb06"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cos__sdo_8h.html#a50611dff589c7f45be050e3917f3fb06">CosSdoBlkUpObjectSize</a> (uint16_t uwIndexV, uint8_t ubSubIndexV)</td></tr>
<tr class="separator:a50611dff589c7f45be050e3917f3fb06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af328aa154a9ab2476b6becfc5251e468"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cos__sdo_8h.html#af328aa154a9ab2476b6becfc5251e468">CosSdoCopyMessageToValue</a> (void *pValueV, uint8_t ubDataTypeV)</td></tr>
<tr class="separator:af328aa154a9ab2476b6becfc5251e468"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f92f9fcc359c26c64e32c5a726ff29d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cos__sdo_8h.html#a9f92f9fcc359c26c64e32c5a726ff29d">CosSdoCopyValueToMessage</a> (void *pValueV, uint8_t ubDataTypeV)</td></tr>
<tr class="separator:a9f92f9fcc359c26c64e32c5a726ff29d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b862e78dfd33f5bf0f6ac9b7e52fca4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cos__sdo_8h.html#a9b862e78dfd33f5bf0f6ac9b7e52fca4">CosSdoResponse</a> (uint8_t ubResponseV)</td></tr>
<tr class="separator:a9b862e78dfd33f5bf0f6ac9b7e52fca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac81e0aea434f36743d396c86cc00a890"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cos__sdo_8h.html#ac81e0aea434f36743d396c86cc00a890">CosSdoSegFinal</a> (uint8_t ubReqCodeV, uint16_t uwIndexV, uint8_t ubSubIndexV)</td></tr>
<tr class="separator:ac81e0aea434f36743d396c86cc00a890"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9638067a7fb28b136e8704cbdbd538ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cos__sdo_8h.html#a9638067a7fb28b136e8704cbdbd538ae">CosSdoSegSetup</a> (void *pvdDataV, uint32_t ulSizeV)</td></tr>
<tr class="separator:a9638067a7fb28b136e8704cbdbd538ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3951c1a176e96180ef612d8baec2852"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cos__sdo_8h.html#ab3951c1a176e96180ef612d8baec2852">CosSdoSendAbort</a> (uint32_t ulErrCodeV)</td></tr>
<tr class="separator:ab3951c1a176e96180ef612d8baec2852"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a7721c3e6256b2bd919505d80a21c2849"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7721c3e6256b2bd919505d80a21c2849">&#9670;&nbsp;</a></span>CosSdoBlkFinal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t CosSdoBlkFinal </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>uwIndexV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ubSubIndexV</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handler for SDO block download. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">uwIndexV</td><td>Index of object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ubSubIndexV</td><td>Sub-index of object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code for SDO callbacks</dd></dl>
<p>This function is called by the stack when all data during a SDO block transfer has been written to the device. The application can now check for valid data before a final SDO response is sent. The function is located in cos_user.c. If no data is checked by the application the function shall return eCosSdo_WRITE_OK. </p>

</div>
</div>
<a id="a50611dff589c7f45be050e3917f3fb06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50611dff589c7f45be050e3917f3fb06">&#9670;&nbsp;</a></span>CosSdoBlkUpObjectSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t CosSdoBlkUpObjectSize </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>uwIndexV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ubSubIndexV</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve Object Size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uwIndexV</td><td>- Index of object </td></tr>
    <tr><td class="paramname">ubSubIndexV</td><td>- Sub-index of object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes for upload </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000020">Todo:</a></b></dt><dd>Adopt to application</dd></dl>
<p>This function is called by protocol stack in order to determine the size (in bytes) of the object to be uploaded (read data from device with SDO block protocol). The function has to be adopted to the application. </p>

</div>
</div>
<a id="af328aa154a9ab2476b6becfc5251e468"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af328aa154a9ab2476b6becfc5251e468">&#9670;&nbsp;</a></span>CosSdoCopyMessageToValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CosSdoCopyMessageToValue </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pValueV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ubDataTypeV</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy data field from SDO message into value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pValueV</td><td>Pointer to value </td></tr>
    <tr><td class="paramname">ubDataTypeV</td><td>Defines the value data type</td></tr>
  </table>
  </dd>
</dl>
<p>This function copies the SDO data field into the location defined by pValueV. Depending on the data type the byte order is assigned according to CiA 301. </p>

</div>
</div>
<a id="a9f92f9fcc359c26c64e32c5a726ff29d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f92f9fcc359c26c64e32c5a726ff29d">&#9670;&nbsp;</a></span>CosSdoCopyValueToMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CosSdoCopyValueToMessage </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pValueV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ubDataTypeV</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy value into SDO message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pValueV</td><td>Pointer to value </td></tr>
    <tr><td class="paramname">ubDataTypeV</td><td>Defines the data type</td></tr>
  </table>
  </dd>
</dl>
<p>This function copies the given value into the data field of a SDO message. Depending on the data type the byte order is assigned according to CiA 301. </p>

</div>
</div>
<a id="a9b862e78dfd33f5bf0f6ac9b7e52fca4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b862e78dfd33f5bf0f6ac9b7e52fca4">&#9670;&nbsp;</a></span>CosSdoResponse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CosSdoResponse </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ubResponseV</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Evaluate SDO messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ubResponseV</td><td>- SDO response code</td></tr>
  </table>
  </dd>
</dl>
<p>This function selects the correct SDO response upon the value of the parameter ubResponseV. The function calls one of the following functions with the appropriate parameter: </p><ul>
<li>CosSdoExpReadResponse() </li>
<li>CosSdoExpWriteResponse() </li>
<li><a class="el" href="cos__sdo_8h.html#ab3951c1a176e96180ef612d8baec2852" title="Send SDO abort message.">CosSdoSendAbort()</a> </li>
</ul>

</div>
</div>
<a id="ac81e0aea434f36743d396c86cc00a890"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac81e0aea434f36743d396c86cc00a890">&#9670;&nbsp;</a></span>CosSdoSegFinal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t CosSdoSegFinal </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ubReqCodeV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>uwIndexV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ubSubIndexV</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handler for segmented SDO write. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ubReqCodeV</td><td>- Request Code of SDO </td></tr>
    <tr><td class="paramname">uwIndexV</td><td>- Index of object </td></tr>
    <tr><td class="paramname">ubSubIndexV</td><td>- Sub-index of object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code for SDO callbacks</dd></dl>
<p>This function is called by the stack when all data during a segmented transfer has been written to the device. The application can now check for valid data before a final SDO response is sent. The function is located in cos_user.c. If no data is checked by the application the function shall return eCosSdo_WRITE_OK. </p>

</div>
</div>
<a id="a9638067a7fb28b136e8704cbdbd538ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9638067a7fb28b136e8704cbdbd538ae">&#9670;&nbsp;</a></span>CosSdoSegSetup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CosSdoSegSetup </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvdDataV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ulSizeV</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise segmented data transfer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pvdDataV</td><td>- Pointer to data </td></tr>
    <tr><td class="paramname">ulSizeV</td><td>- Size of data be transferred</td></tr>
  </table>
  </dd>
</dl>
<p>This function is used to initialise the Segmented SDO data transfer. </p>

</div>
</div>
<a id="ab3951c1a176e96180ef612d8baec2852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3951c1a176e96180ef612d8baec2852">&#9670;&nbsp;</a></span>CosSdoSendAbort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CosSdoSendAbort </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ulErrCodeV</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send SDO abort message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ulErrCodeV</td><td>Abort code</td></tr>
  </table>
  </dd>
</dl>
<p>This function is sends a SDO abort message. The abort code is taken from the file <a class="el" href="canopen_8h.html" title="General CANopen definitions.">canopen.h</a> (SDO_ERR_XXX). </p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/>
<address class="footer"><small>
<a href="http://www.microcontrol.net">
&copy; MicroControl GmbH &amp; Co. KG
</a>
</small></address>
</body>
</html>
